{"version":3,"sources":["../../../src/api/clockin/clockin.controller.js"],"names":["clockin","log","req","res","next","body","user_id","config","method","url","headers","process","env","TANDA_TOKEN","form","parseInt","type","time","Date","now","err","response","Error","send","message"],"mappings":";;;;;QAKgBA,O,GAAAA,O;;AAJhB;;;;AACA;;;;;;AAFA;AAGA,IAAMC,MAAM,qBAAM,oBAAN,CAAZ;;AAEO,SAASD,OAAT,CAAiBE,GAAjB,EAAsBC,GAAtB,EAA2BC,IAA3B,EAAiC;AACtCH,MAAI,WAAJ;AACAA,uBAAmBC,IAAIG,IAAJ,CAASC,OAA5B;;AAEA,MAAMC,SAAS;AACbC,YAAQ,MADK;AAEbC,SAAK,qCAFQ;AAGbC,aAAS;AACP,sBAAgB,kBADT;AAEP,mCAA2BC,QAAQC,GAAR,CAAYC;AAFhC,KAHI;AAObC,UAAM;AACJR,eAASS,SAASb,IAAIG,IAAJ,CAASC,OAAlB,CADL;AAEJU,YAAM,SAFF;AAGJC,YAAMC,KAAKC,GAAL;AAHF;AAPO,GAAf;;AAcA,yBAAQZ,MAAR,EAAgB,UAACa,GAAD,EAAMC,QAAN,EAAgBhB,IAAhB,EAAyB;AACvC,QAAIe,GAAJ,EAAS;AACP,YAAM,IAAIE,KAAJ,CAAUF,GAAV,CAAN;AACD;AACDnB,QAAII,IAAJ;;AAEAF,QAAIoB,IAAJ,CAAS;AACPC,eAAS;AADF,KAAT;AAGD,GATD;AAUD","file":"clockin.controller.js","sourcesContent":["/* eslint no-unused-vars: [\"error\", { \"argsIgnorePattern\": \"next\" }] */\r\nimport debug from 'debug';\r\nimport request from 'request';\r\nconst log = debug('clockin.controller');\r\n\r\nexport function clockin(req, res, next) {\r\n  log('Clock In!');\r\n  log(`Employee id ${req.body.user_id}`);\r\n\r\n  const config = {\r\n    method: 'POST',\r\n    url: 'https://my.tanda.co/api/v2/clockins',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${process.env.TANDA_TOKEN}`\r\n    },\r\n    form: {\r\n      user_id: parseInt(req.body.user_id),\r\n      type: 'clockin',\r\n      time: Date.now()\r\n    }\r\n  };\r\n\r\n  request(config, (err, response, body) => {\r\n    if (err) {\r\n      throw new Error(err);\r\n    }\r\n    log(body);\r\n\r\n    res.send({\r\n      message: 'Successfully clocked in!'\r\n    });\r\n  });\r\n}\r\n"]}