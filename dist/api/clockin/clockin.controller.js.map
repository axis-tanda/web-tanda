{"version":3,"sources":["../../../src/api/clockin/clockin.controller.js"],"names":["clockin","log","req","res","next","body","user_id","config","method","url","headers","process","env","TANDA_TOKEN","form","parseInt","type","time","Date","now","err","response","Error","send","message"],"mappings":";;;;;QAKgBA,O,GAAAA,O;;AAJhB;;;;AACA;;;;;;AAFA;AAGA,IAAMC,MAAM,qBAAM,oBAAN,CAAZ;;AAEO,SAASD,OAAT,CAAiBE,GAAjB,EAAsBC,GAAtB,EAA2BC,IAA3B,EAAiC;AACtCH,MAAI,WAAJ;AACAA,uBAAmBC,IAAIG,IAAJ,CAASC,OAA5B;;AAEA,MAAMC,SAAS;AACbC,YAAQ,MADK;AAEbC,SAAK,qCAFQ;AAGbC,aAAS;AACP,sBAAgB,kBADT;AAEP,mCAA2BC,QAAQC,GAAR,CAAYC;AAFhC,KAHI;AAObC,UAAM;AACJR,eAASS,SAASb,IAAIG,IAAJ,CAASC,OAAlB,CADL;AAEJU,YAAM,SAFF;AAGJC,YAAMC,KAAKC,GAAL;AAHF;AAPO,GAAf;;AAcA,yBAAQZ,MAAR,EAAgB,UAACa,GAAD,EAAMC,QAAN,EAAgBhB,IAAhB,EAAyB;AACvC,QAAIe,GAAJ,EAAS;AACP,YAAM,IAAIE,KAAJ,CAAUF,GAAV,CAAN;AACD;AACDnB,QAAII,IAAJ;;AAEAF,QAAIoB,IAAJ,CAAS;AACPC,eAAS;AADF,KAAT;AAGD,GATD;AAUD","file":"clockin.controller.js","sourcesContent":["/* eslint no-unused-vars: [\"error\", { \"argsIgnorePattern\": \"next\" }] */\nimport debug from 'debug';\nimport request from 'request';\nconst log = debug('clockin.controller');\n\nexport function clockin(req, res, next) {\n  log('Clock In!');\n  log(`Employee id ${req.body.user_id}`);\n\n  const config = {\n    method: 'POST',\n    url: 'https://my.tanda.co/api/v2/clockins',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${process.env.TANDA_TOKEN}`\n    },\n    form: {\n      user_id: parseInt(req.body.user_id),\n      type: 'clockin',\n      time: Date.now()\n    }\n  };\n\n  request(config, (err, response, body) => {\n    if (err) {\n      throw new Error(err);\n    }\n    log(body);\n\n    res.send({\n      message: 'Successfully clocked in!'\n    });\n  });\n}\n"]}